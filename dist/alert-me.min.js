angular.module("alert-me",[]).run(function($document,$templateCache){var mainTmpl='<div class="notify-container {{posV}} {{posH}}"><ul class="notify-nav" ><alert-message ng-repeat="message in messages" message="message"></alert-message></ul></div>',listTmpl='<li class="notify-list" ng-click="onClick($event)"><div class="notify-alert {{message.className}}"><span ng-show="message.count > 1" class="count" ng-bind="message.count"></span><span ng-if="message.title" class="title" ng-bind="message.title"></span><span ng-if="message.isTrustedHtml" class="content" ng-bind-html="message.content"></span><span ng-if="!message.isTrustedHtml" class="content" ng-bind="message.content"></span><span ng-if="message.dismissButton" class="close" ng-click="closeAlert()">X</span></div></li>';if($templateCache.put("alert-me/main-template.html",mainTmpl),$templateCache.put("alert-me/list-template.html",listTmpl),!$document.find("alert-me").length)return $document[0].body.appendChild($document[0].createElement("alert-me"))}),angular.module("alert-me").directive("alertMe",function(AlertMe){function link(scope,elem,attrs){scope.messages=AlertMe.messages,scope.posH=AlertMe.defaults.horizontalPosition,scope.posV=AlertMe.defaults.verticalPosition}var directive={restrict:"E",scope:!0,templateUrl:"alert-me/main-template.html",link:link};return directive}).directive("alertMessage",function($timeout,$q,$sce,$location,AlertMe){function link(scope,element,attrs,ctrl,transclude){var promise;return scope.closeAlert=function(){return AlertMe.dismiss(scope.message.id)},scope.onClick=function(e){if(e.preventDefault(),scope.message.dismissOnClick)return scope.closeAlert()},scope.message.resolve&&angular.isFunction(scope.message.resolve)?$q.when(scope.message.resolve(),scope.closeAlert):(scope.message.dismissOnTimeout&&(promise=$timeout(function(){return scope.closeAlert()},1e3*scope.message.dismissTimeout),element.bind("mouseenter",function(e){$timeout.cancel(promise)}),element.bind("mouseleave",function(e){promise=$timeout(function(){return scope.closeAlert()},1e3*scope.message.dismissTimeout)})),void scope.$watch("message.count",function(n,o){o!==n&&n>1&&scope.message.dismissOnTimeout&&($timeout.cancel(promise),promise=$timeout(function(){return scope.closeAlert()},1e3*scope.message.dismissTimeout))}))}var scope={message:"="},directive={restrict:"E",replace:!0,scope:scope,templateUrl:"alert-me/list-template.html",link:link};return directive}),angular.module("alert-me").factory("AlertMe",function($sce,$q,Alert){function _create(msg){if(msg="object"==typeof msg?msg:{content:msg},msg=angular.extend({},_defaults,msg),!angular.isFunction(msg.onBeforeCreate(msg))||msg.onBeforeCreate(msg)){if(msg.count=1,msg.className=msg.className?msg.className:defaults.className,msg.maxNum&&_messages.length>=msg.maxNum&&"top"===msg.verticalPosition?this.dismiss(_messages[0].id):msg.maxNum&&_messages.length>=msg.maxNum&&"bottom"===msg.verticalPosition&&this.dismiss(_messages[_messages.length-1].id),msg.combineDuplications)for(var i=0;i<_messages.length;i++)if(_messages[i].content==msg.content&&_messages[i].className==msg.className)return _messages[i].count++;return msg.id="ID:"+Date.now()+Math.floor(10*Math.random()+1),msg.content=msg.isTrustedHtml?$sce.trustAsHtml(msg.content):msg.content,"bottom"===msg.verticalPosition?_messages.unshift(msg):_messages.push(msg),msg.onAfterCreate&&angular.isFunction(msg.onAfterCreate)&&msg.onAfterCreate(),msg.id}}function _dismiss(id){for(var i=0;i<_messages.length;i++)if(_messages[i].id==id){var message=angular.copy(_messages[i]);if(_messages.splice(i,1),angular.isFunction(message.onDismiss))return message.onDismiss(message)}}function _info(msg){var object=_mergeParams(msg,{className:"info"});return this.create(object)}function _success(msg){var object=_mergeParams(msg,{className:"success"});return this.create(object)}function _warning(msg){var object=_mergeParams(msg,{className:"warning"});return this.create(object)}function _danger(msg){var object=_mergeParams(msg,{className:"danger"});return this.create(object)}function _mergeParams(object,defaults){return angular.isString(object)?defaults.content=object:angular.isObject(object)&&(defaults=angular.extend(object,defaults)),defaults}var _messages=[],_defaults=Alert.defaults,service={defaults:_defaults,messages:_messages,create:_create,dismiss:_dismiss,info:_info,success:_success,warning:_warning,danger:_danger};return service}),angular.module("alert-me").factory("alertInterceptor",function($q,AlertMe){return{requestError:function(rejection){return AlertMe.warning({title:rejection.status,content:rejection.statusText}),$q.reject(rejection)},responseError:function(rejection){return AlertMe.warning({title:rejection.status,content:rejection.statusText}),$q.reject(rejection)}}}),angular.module("alert-me").provider("Alert",function(){var _defaults={maxNum:0,verticalPosition:"top",horizontalPosition:"right",className:"default",isTrustedHtml:!1,combineDuplications:!0,dismissButton:!0,dismissOnTimeout:!0,dismissTimeout:4,dismissOnClick:!0,onBeforeCreate:function(msg){return!0},onAfterCreate:null,onBeforeDismiss:null,onDismiss:null};this.configure=function(options){return _defaults=angular.extend(_defaults,options)},this.$get=function(){return{defaults:_defaults}}});